(this.webpackJsonpflow_app=this.webpackJsonpflow_app||[]).push([[0],{102:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),l=a.n(o),c=(a(96),a(8)),i=a(11),u=a(137),s=Object(u.a)((function(e){return{root:{display:"block"},title:{textAlign:"center"},container:{minWidth:"500px"},footer:{textAlign:"center",margin:"30px"}}})),m=a(140),f=a(142),d=a(143),E=a(148),p=a(157),v=a(147),O=a(156),w=a(45),b=a(149),h=a(19),g=a(72),k=a.n(g),j=a(73),N=a.n(j);var S,y=function(e){var t=e.signIn,a=s(),o=Object(n.useState)(""),l=Object(c.a)(o,2),i=l[0],u=l[1],g=Object(n.useState)(""),j=Object(c.a)(g,2),S=j[0],y=j[1],x=Object(n.useState)(!1),D=Object(c.a)(x,2),C=D[0],P=D[1];return r.a.createElement(m.a,{raised:!0,className:a.container},r.a.createElement(f.a,{title:"Login",className:a.title}),r.a.createElement(d.a,null,r.a.createElement(p.a,{className:a.root,placeholder:"Email",value:i,onChange:function(e){var t=e.target.value;u(t)},margin:"normal",type:"email",variant:"outlined",fullWidth:!0,InputProps:{startAdornment:r.a.createElement(v.a,{position:"start"},r.a.createElement(k.a,null))}}),r.a.createElement(p.a,{className:a.root,placeholder:"Password",value:S,onChange:function(e){var t=e.target.value;y(t)},margin:"normal",type:"password",variant:"outlined",fullWidth:!0,InputProps:{startAdornment:r.a.createElement(v.a,{position:"start"},r.a.createElement(N.a,null))}}),r.a.createElement(O.a,{checked:C,onChange:function(){P(!C)},inputProps:{"aria-label":"primary checkbox"}})," ",r.a.createElement(w.a,{variant:"body1",display:"inline"},"Remember me")),r.a.createElement(E.a,null,r.a.createElement(b.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:function(){return t(i,S,C)}},"Login")),r.a.createElement("div",{className:a.footer},r.a.createElement(h.b,{to:"#"},r.a.createElement(w.a,{variant:"subtitle1",display:"inline"},"Don't have an account? Sign up here"))))},x=Object(u.a)((function(e){return{root:{display:"flex",alignItems:"center",justifyContent:"center",marginTop:"20vh"}}})),D=Object(n.createContext)([]);!function(e){e.LOGIN="[AUTH] login",e.LOGOUT="[AUTH] logout"}(S||(S={}));var C,P,I,L=function(){var e=x(),t=Object(n.useContext)(D),a=Object(c.a)(t,2)[1],o=Object(i.h)().state,l=Object(i.g)();return r.a.createElement("div",{className:e.root},r.a.createElement(y,{signIn:function(e,t,n){!function(e,t,a,n){e({type:S.LOGIN,payload:{email:t,password:a,rememberMe:n}})}(a,e,t,n),l.push(o&&o.from||"/")}}))},T=a(15),W=a(78),A=Object(u.a)((function(e){return{root:{padding:"10px 20px",margin:"0px"},filter:{minWidth:"120px"},createButton:{marginLeft:"auto"}}})),G=a(150),M=a(155),F=a(160),R=a(146);!function(e){e.ALL="All",e.COMPLETED="Completed",e.PENDING="Pending"}(C||(C={})),function(e){e.COMPLETED="Completed",e.PENDING="Pending"}(P||(P={})),function(e){e.COMPLETED="Completed",e.IN_PROGRESS="In Progress",e.PENDING="Pending"}(I||(I={}));var U=function(e){var t=e.filter,a=e.updateFilter,n=e.createNewWorkflow,o=A();return r.a.createElement(W.a,{elevation:3,className:o.root},r.a.createElement(w.a,{variant:"body1"},"Search workflow based on workflow names"),r.a.createElement(G.a,{container:!0,alignItems:"center"},r.a.createElement(G.a,{item:!0,xs:4},r.a.createElement(p.a,{className:o.root,placeholder:"Search",value:t.searchString,margin:"normal",variant:"outlined",fullWidth:!0,onChange:function(e){var n=e.target.value;a({filter:t.filter,searchString:n})}})),r.a.createElement(G.a,{item:!0,xs:2},r.a.createElement(R.a,{variant:"outlined"},r.a.createElement(M.a,{defaultValue:C.ALL,onChange:function(e){var n=e.target.value;a({filter:n,searchString:t.searchString})},displayEmpty:!0,className:o.filter},r.a.createElement(F.a,{value:C.ALL},C.ALL),r.a.createElement(F.a,{value:C.COMPLETED},C.COMPLETED),r.a.createElement(F.a,{value:C.PENDING},C.PENDING)))),r.a.createElement(G.a,{item:!0,xs:2,className:o.createButton},r.a.createElement(b.a,{onClick:n,variant:"contained",color:"primary",fullWidth:!0},"Create Workflow"))))},_=Object(u.a)((function(e){return{root:{position:"relative",margin:"20px 20px"},title:{textAlign:"center"},delete:{position:"absolute",right:"0px",transform:"translate(50%,-50%)"},deleteHide:{display:"none"}}})),B=a(57),H=a.n(B),J=a(74),V=a.n(J),$=a(151),q=a(62),z=a.n(q);var K=function(e){var t=e.state,a=e.deleteFn,o=e.updateState,l=_(),i=Object(n.useState)(!1),u=Object(c.a)(i,2),s=u[0],E=u[1],p=s?z()(l.delete):z()(l.delete,l.deleteHide),v=t.state===P.COMPLETED?"primary":"default";return r.a.createElement(h.b,{to:"/workflow/".concat(t.id),onMouseEnter:function(){E(!0)},onMouseLeave:function(){E(!1)}},r.a.createElement("div",{className:l.root},r.a.createElement($.a,{style:{color:"red"},"aria-label":"Delete",className:p,onClick:function(e){e.preventDefault(),a(t.id)}},r.a.createElement(V.a,null)),r.a.createElement(m.a,{raised:!0},r.a.createElement(f.a,{title:t.name,className:l.title}),r.a.createElement(d.a,null,r.a.createElement(G.a,{container:!0,justify:"space-between",alignItems:"center"},r.a.createElement(G.a,{item:!0},r.a.createElement(w.a,{variant:"body1",display:"inline"},t.state)),r.a.createElement(G.a,{item:!0},r.a.createElement($.a,{color:v,"aria-label":"Check",onClick:function(e){e.preventDefault(),o(t.id)}},r.a.createElement(H.a,null))))))))},Q=Object(u.a)((function(e){return{container:{padding:"0px"}}}));var X,Y=function(e){var t=e.workflowStates,a=e.deleteWorkflow,n=e.updateWorkflowState,o=Q();return r.a.createElement(G.a,{container:!0,className:o.container},t.map((function(e,t){return r.a.createElement(G.a,{item:!0,xs:3,key:t},r.a.createElement(K,{state:e,deleteFn:a,updateState:n}))})))},Z=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column"}}})),ee=a(158),te=Object(n.createContext)([]);function ae(e,t){e({type:X.UPDATE,payload:t})}!function(e){e.ADD="[Workflow] add",e.UPDATE="[Workflow] update",e.DELETE="[Workflow] delete"}(X||(X={}));var ne=Object(n.createContext)([]);var re=function(){var e=Z(),t=Object(n.useContext)(te),a=Object(c.a)(t,2),o=a[0].workflowStates,l=a[1],u=Object(n.useContext)(ne),s=Object(c.a)(u,1)[0].nodeStates,m=Object(n.useState)({filter:C.ALL,searchString:""}),f=Object(c.a)(m,2),d=f[0],E=f[1],p=Object(i.g)(),v=Object(n.useState)(o),O=Object(c.a)(v,2),w=O[0],b=O[1];return Object(n.useEffect)((function(){var e=d.filter===C.COMPLETED?P.COMPLETED:P.PENDING,t=o.filter((function(t){return d.filter===C.ALL||e===t.state})).filter((function(e){return e.name.includes(d.searchString)}));b(t)}),[d,o]),r.a.createElement("div",{className:e.root},r.a.createElement(U,{filter:d,updateFilter:function(e){var t=e.filter,a=e.searchString;E({filter:t,searchString:a})},createNewWorkflow:function(){var e=Object(ee.a)();!function(e,t){e({type:X.ADD,payload:t})}(l,e),p.push("/workflow/".concat(e))}}),r.a.createElement(Y,{workflowStates:w,deleteWorkflow:function(e){!function(e,t){e({type:X.DELETE,payload:t})}(l,e)},updateWorkflowState:function(e){if(s.filter((function(t){return t.workflowId===e})).reduce((function(e,t){return e&&t.state===I.COMPLETED}),!0)){var t=o.find((function(t){return t.id===e})),a=t.state===P.COMPLETED?P.PENDING:P.COMPLETED;ae(l,Object(T.a)({},t,{state:a}))}}}))},oe=a(16),le=Object(u.a)((function(e){return{root:{padding:"10px 20px",margin:"0px"},filter:{minWidth:"120px"},createButton:{marginLeft:"auto"}}})),ce=Object(u.a)((function(e){return{root:{display:"inline",margin:"0px 10px"}}}));var ie=function(e){var t=e.workflowState,a=e.updateWorkFlow,n=e.addTask,o=e.saveTasks,l=e.deleteTask,c=e.shuffleTasks,i=le(),u=ce();return r.a.createElement(W.a,{elevation:3,className:i.root},r.a.createElement(G.a,{container:!0,alignItems:"center",justify:"space-between"},r.a.createElement(G.a,{item:!0},r.a.createElement(p.a,{className:i.root,placeholder:"Workflow Name",value:t.name,margin:"normal",variant:"outlined",fullWidth:!0,onChange:function(e){var n=e.target.value;return a(Object(T.a)({},t,{name:n}))}})),r.a.createElement(G.a,{item:!0,className:i.createButton},t.state===P.COMPLETED?r.a.createElement(b.a,{variant:"contained",color:"primary",className:u.root,onClick:c},"Shuffle"):r.a.createElement(r.a.Fragment,null),r.a.createElement(b.a,{variant:"contained",color:"primary",className:u.root,onClick:l},"Delete"),r.a.createElement(b.a,{variant:"contained",color:"primary",className:u.root,onClick:n},"Add Node"),r.a.createElement(b.a,{variant:"contained",color:"primary",className:u.root,onClick:o},"Save"))))},ue=Object(u.a)((function(e){return{root:{position:"relative",margin:"20px 20px"},title:{textAlign:"center"},check:{position:"absolute",right:"0px",transform:"translate(50%,-50%)"},checkHide:{display:"none"}}}));var se=function(e){var t=e.node,a=e.update,n=ue(),o=t.state===I.COMPLETED?"primary":t.state===I.IN_PROGRESS?"secondary":"default";return r.a.createElement("div",{className:n.root},r.a.createElement($.a,{color:o,"aria-label":"Check",className:n.check,onClick:function(){var e=t.state===I.PENDING?I.IN_PROGRESS:t.state===I.IN_PROGRESS?I.COMPLETED:I.PENDING;a(Object(T.a)({},t,{state:e}))}},r.a.createElement(H.a,null)),r.a.createElement(m.a,{raised:!0},r.a.createElement(d.a,null,r.a.createElement(G.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(G.a,{item:!0},r.a.createElement(p.a,{placeholder:"Task",value:t.task,margin:"normal",variant:"outlined",fullWidth:!0,onChange:function(e){var n=e.target.value;a(Object(T.a)({},t,{task:n}))}})),r.a.createElement(G.a,{item:!0},r.a.createElement(p.a,{"aria-label":"maximum height",placeholder:"Description",multiline:!0,rows:8,margin:"normal",variant:"outlined",value:t.description,fullWidth:!0,onChange:function(e){var n=e.target.value;a(Object(T.a)({},t,{description:n}))}}))))))},me=Object(u.a)((function(e){return{container:{}}}));var fe,de=function(e){var t=e.nodes,a=e.setNodes,n=me(),o=function(e){var n=t.findIndex((function(t){return e.id===t.id})),r=Object(oe.a)(t);r[n]=Object(T.a)({},e),a(r)};return r.a.createElement(G.a,{container:!0,className:n.container},t.map((function(e,t){return r.a.createElement(G.a,{item:!0,xs:3,key:t},r.a.createElement(se,{node:e,update:o}))})))},Ee=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column"}}}));!function(e){e.SAVE="[Workflow] save"}(fe||(fe={}));var pe=function(e){var t=Object(n.useContext)(te),a=Object(c.a)(t,2),r=a[0].workflowStates,o=a[1];return{workflow:r.find((function(t){return t.id===e})),workFlowDispatch:o}};var ve=function(e){var t=Object(n.useContext)(ne),a=Object(c.a)(t,2),r=a[0].nodeStates,o=a[1];return{nodes:r.filter((function(t){return t.workflowId===e})),nodeDispatch:o}},Oe=a(75),we=a.n(Oe);var be=function(){var e=Ee(),t=Object(i.i)().id,a=pe(t),o=a.workflow,l=a.workFlowDispatch,u=ve(t),s=u.nodes,m=u.nodeDispatch,f=Object(n.useState)(s),d=Object(c.a)(f,2),E=d[0],p=d[1],v=Object(n.useState)(o),O=Object(c.a)(v,2),w=O[0],b=O[1];return Object(n.useEffect)((function(){b(o)}),[o]),r.a.createElement("div",{className:e.root},r.a.createElement(ie,{workflowState:w,updateWorkFlow:function(e){b(e)},addTask:function(){p([].concat(Object(oe.a)(E),[{id:Object(ee.a)(),workflowId:t,task:"",description:"",state:I.PENDING}]))},saveTasks:function(){var e=E.reduce((function(e,t){var a=t.state;return e&&a===I.COMPLETED}),!0),a=w.state===P.COMPLETED&&!1===e?P.PENDING:w.state;ae(l,Object(T.a)({},w,{state:a})),function(e,t){var a=t.nodes,n=t.workflowId;e({type:fe.SAVE,payload:{nodes:a,workflowId:n}})}(m,{nodes:E,workflowId:t})},deleteTask:function(){if(E.length>0){var e=Object(oe.a)(E);e.pop(),p(e)}},shuffleTasks:function(){var e=we()(E);p(e)}}),r.a.createElement(de,{nodes:E,setNodes:p}))};var he=function(){var e=Object(n.useContext)(D),t=Object(c.a)(e,1)[0].auth;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/workflow/:id"},r.a.createElement(be,null)),r.a.createElement(i.b,{path:"/workflow"},r.a.createElement(re,null)),r.a.createElement(i.b,{path:"/",render:function(){return r.a.createElement(i.a,{to:{pathname:"/workflow"}})}})):r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/signIn"},r.a.createElement(L,null)),r.a.createElement(i.b,{path:"/",render:function(e){var t=e.location;return r.a.createElement(i.a,{to:{pathname:"/signIn",state:{from:t}}})}})))},ge=a(152),ke=a(153),je=Object(u.a)((function(e){return{title:{flexGrow:1},link:{color:"white"}}}));var Ne=function(){var e=je(),t=Object(n.useContext)(D),a=Object(c.a)(t,2),o=a[0].auth,l=a[1];return r.a.createElement(ge.a,{position:"static"},r.a.createElement(ke.a,null,r.a.createElement(w.a,{variant:"h6",className:e.title},r.a.createElement(h.b,{to:"/",className:e.link},"FLOWAPP")),o?r.a.createElement(b.a,{variant:"contained",onClick:function(){!function(e){e({type:S.LOGOUT,payload:null})}(l)}},"LOGOUT"):r.a.createElement(r.a.Fragment,null)))},Se=Object(u.a)((function(e){return{root:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{flexGrow:1}}})),ye=a(154);var xe=function(e,t){var a,n,r;switch(t.type){case S.LOGIN:return(a=t.payload).rememberMe&&(n="app_auth",r=JSON.stringify({email:a.email,password:a.password}),localStorage.setItem(n,JSON.stringify(r))),{auth:{email:a.email,password:a.password}};case S.LOGOUT:return a=t.payload,function(e){localStorage.removeItem(e)}("app_auth"),{auth:null};default:return e}},De={auth:function(e){var t=localStorage.getItem(e);return t&&JSON.parse(t)}("app_auth")||null};var Ce=function(e){var t=Object(n.useReducer)(xe,De),a=Object(c.a)(t,2),o=a[0],l=a[1];return r.a.createElement(D.Provider,{value:[o,l]},e.children)},Pe=a(76),Ie=function(e,t){switch(t.type){case X.ADD:var a={id:t.payload,name:"",state:P.PENDING};return{workflowStates:[].concat(Object(oe.a)(e.workflowStates),[a])};case X.UPDATE:var n=t.payload,r=n.id,o=Object(Pe.a)(n,["id"]),l=Object(oe.a)(e.workflowStates),c=l.findIndex((function(e){return e.id===r}));return l[c]=Object(T.a)({},l[c],{},o),{workflowStates:l};case X.DELETE:var i=t.payload,u=e.workflowStates.findIndex((function(e){return e.id===i})),s=Object(oe.a)(e.workflowStates);return s.splice(u,1),{workflowStates:Object(oe.a)(s)};default:return e}},Le={workflowStates:[]};var Te=function(e){var t=Object(n.useReducer)(Ie,Le),a=Object(c.a)(t,2),o=a[0],l=a[1];return r.a.createElement(te.Provider,{value:[o,l]},e.children)},We=function(e,t){switch(t.type){case fe.SAVE:var a=t.payload,n=a.nodes,r=a.workflowId;return{nodeStates:[].concat(Object(oe.a)(e.nodeStates.filter((function(e){return e.workflowId!==r}))),Object(oe.a)(n))};default:return e}},Ae={nodeStates:[]};var Ge=function(e){var t=Object(n.useReducer)(We,Ae),a=Object(c.a)(t,2),o=a[0],l=a[1];return r.a.createElement(ne.Provider,{value:[o,l]},e.children)};var Me=function(){var e=Se();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,null),r.a.createElement(Ce,null,r.a.createElement(Te,null,r.a.createElement(Ge,null,r.a.createElement("div",{className:e.root},r.a.createElement(h.a,null,r.a.createElement(Ne,null),r.a.createElement("div",{className:e.main},r.a.createElement(he,null))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},91:function(e,t,a){e.exports=a(102)},96:function(e,t,a){}},[[91,1,2]]]);
//# sourceMappingURL=main.8a875c90.chunk.js.map